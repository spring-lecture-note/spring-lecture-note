Object.assign(window.search, {"doc_urls":["introduction.html#introduction","chapter_01.html#통신","chpater_02.html#tcpudp-통신","chpater_02.html#청군의-통신-전략-3-way-handshake","chpater_02.html#cia","chpater_02.html#감옥에-갇힌-죄수이야기","chpater_02.html#밥의-암호화-전략-대칭키-공개키","chpater_02.html#밥의-신뢰성-전략-rsa","chpater_02.html#청군이-백군에게-완벽하게-승리하는-방법"],"index":{"documentStore":{"docInfo":{"0":{"body":0,"breadcrumbs":2,"title":1},"1":{"body":0,"breadcrumbs":0,"title":0},"2":{"body":1,"breadcrumbs":2,"title":1},"3":{"body":38,"breadcrumbs":4,"title":3},"4":{"body":18,"breadcrumbs":2,"title":1},"5":{"body":0,"breadcrumbs":1,"title":0},"6":{"body":3,"breadcrumbs":1,"title":0},"7":{"body":26,"breadcrumbs":2,"title":1},"8":{"body":19,"breadcrumbs":1,"title":0}},"docs":{"0":{"body":"","breadcrumbs":"Introduction » Introduction","id":"0","title":"Introduction"},"1":{"body":"","breadcrumbs":"통신 » 통신","id":"1","title":"통신"},"2":{"body":"지금 하게될 TCP/UDP에 대한 내용은 통신에 있어서 중요한 개념이다. 우선, 통신을 이해하는데 있어서 중요한 개념들을 간단한 사례를 통해 알아보자.","breadcrumbs":"TCP » TCP/UDP 통신","id":"2","title":"TCP/UDP 통신"},"3":{"body":"청군100명 백군 80명 누가 전쟁에서 승리할까? 다만, 청군은 백군 80명을 사이에 두고 50명, 50명 두군데로 나뉘어져 있다. 전쟁에서 승리하기 위해서는 양쪽으로 나뉘어져 있는 청군 사이에 통신이 필요하다. 우리가 통신이 갖춰야할 중요한 개념들에 대해 이해한다면 청군이 백군에게 완벽하게 승리하는 방법을 알 수 있다. 또한, 이것을 이해하면 더 나아가 어떤 암호화 전략이 가장 좋은 알고리즘인지 알 수 있다. 이에 대한 내용만 충분히 알면 되고, 이 이후인 4세대 동형 암호까지는 꼭 알아야할 필요는 없다. 자, 그러면 TCP와 RSA를 이해해보자. 청군이 이기기 위해서는 조건이 필요하다. 동시에 쳐들어가야 전쟁에서 이길 수 있으며, 이를 위해서는 통신이 필요하다. 물리적으로 떨어져있고, 중간에 백군이 가로막고 있기 때문에, 말을 타고 메세지를 전달해야 한다. 어떤 특정한 시각에 동시에 쳐들어가자는 메시지를 전달하려고 한다. \"2023년 2월 2일 10시에 공격\" 이라는 메시지를 말을 태워 보낼 것이다. 잘 생각해보자. 보내기만 하면 전쟁에 이길 수 있을 것인가? 메시지가 반대편에 잘 전달되었다는 사실을 확인을 안했기 때문에 혼자 쳐들어갈 수 있다. 또한 다양한 여러가지의 경우의 수가 존재한다. 각각의 경우의 수로 나누어 살펴보자. 왼쪽의 청군이 보낸 메시지를 백군에게 중간에 탈취 당할 수 있다. 탈취 당했다는건 왼쪽 청군이 메시지를 보냈는데, 백군에게 메시지를 빼앗겼다는 뜻이다. 탈취만 당하는 상황이라면, 수많은 말을 보내고 그 중에 몇개는 전달될 수도 있을 것이다. 하지만, 이것으로 통신이 될 수 없고, 전쟁에서 승리하지도 못할 것이다. 왼쪽의 청군이 메시지를 보냈는데 탈취를 당하고, 위조된 메시지가 오른쪽 청군에게 전달될 수 있다. 즉, \"2023년 2월 5일 10시에 공격\" 이라는 메시지로 오른쪽 청군에게 전달될 수 있다. 왼쪽의 청군이 보낸 메시지가 오른쪽 청군에게 잘 전달이 된 상황을 가정해보자. 왼쪽과 오른쪽의 청군이 동시에 백군을 쳐들어 가기 위해서는 오른쪽에 있는 청군이 메시지를 잘 전달 받았다는 응답을 해주어야 한다. OK 라고 응답을 해주어야지 둘이 동시에 쳐들어갈 수 있을 것이다. 위의 경우와 마찬가지로 응답을 보내는 도중에 또 탈취를 당할 수 있다. 마찬가지로 왼쪽 청군이 보낸 메시지가 오른쪽 청군에게 제대로 전달이 되었고, 이에 대한 응답을 보냈는데 이것이 탈취를 당하고 위조된 NO 라는 메시지가 왼쪽 청군에게 전달될 수 있다. 이렇게 해서는 청군은 전쟁에서 승리할 수 없다. 왼쪽 청군의 메시지가 오른쪽 청군에게 잘 전달되었고, 이에 대한 응답도 다시 왼쪽 청군에게 잘 전달되었다. 여기서 최종적으로 OK 라고 받았을때 오른쪽 청군에게 다시 한번 응답을 해줘야 한다. 여기까지가 통신의 기본이다. 내가 데이터를 전달을 하고 상대방이 거기에 대해서 응답을 하면, 나는 상대방의 응답에 대해서 다시 한번 응답을 해줘야 한다. 이로써 데이터의 신뢰성이 확보 될 수 있다. 이와 같이 데이터가 세번 전달되는 것을 통신에서는 '3 way handshake' 라고 한다. 자, 그럼 다시 청군과 백군의 사례로 돌아가서 생각해보자. '3 way handshake' 가 지켜졌다고 해서 청군이 전쟁에서 이길 수 있을까? '3 way handshake' 는 통신에서 서로간의 데이터가 전달이 되었다는 사실만 검증하는 것이지, 내가 원하는 데이터가 전달되었다는 사실은 검증을 하지 못한다. 중간에서 이 데이터를 누가 탈취하고 위조해서 전달할 수 있기 때문이다. 즉, 데이터가 전달되었다는 것 만으로는 전쟁에서 승리할 수 없다. 여기까지를 TCP 통신 이라고 한다. 반대되는 개념으로 UDP 통신이 있다. UDP 는 메시지의 전송자가 수신자에게 계속 데이터를 일방적으로 보내는 형식이다. 즉, 데이터가 양방향으로 서로 주고 받는 것이 아니라, 단방향으로 전달되는 방식이다. 전송자는 데이터가 잘 전달되었는지 궁금해 하지도 않는다. 우리는 흔히 인터넷에서 서비스를 이용할때 로그인을 할 것이다. 내 컴퓨터에서 브라우저를 열고, 로그인 창에서 아이디와 패스워드를 입력하고 전송한 상황이다. 네이버에 로그인을 한다는 것은 네이버가 관리하는 컴퓨터에 데이터를 전달하는 것이다. 이것을 UDP로 전달한다고 생각해보자. 데이터의 신뢰성이 있을까? 로그인을 위해 아이디와 패스워드를 전송하는 것과 같이 데이터를 신뢰성있게 전달해야하는 경우가 있고, 그렇지 않은 경우가 있다. 이번에는 우리가 전화를 한다거나, 영상을 스트리밍하는 상황을 가정해보자. 영상을 전송할때는 영상을 일방적으로 수신자에게 전달한다. 영상은 곧 사진을 전송하는 것과 같은데, 사진을 초당 24장을 전송하면 수신자는 이것을 연속적으로 열면 영상으로 인식된다. 한시간짜리 동영상을 전송한다고 해보자. 엄청나게 많은 사진이 전송이 될 것이다. 이 전송된 데이터 중에 몇개가 제대로 전송이 안되었을 경우, 우리가 영상을 보는데 문제가 있을까? 몇 장의 사진 정도가 제대로 전송되지 않는다고 해서 영상을 못보는 경우는 발생하지 않는다. 전화로 통신할 때도 마찬가지이다. 전화도 UDP로 통신을 한다. 내 음성이 조금 끊긴다고 하더라도, 인간은 추측해서 인식하는 능력이 있다. '반갑습니다' 라는 음성중에서 한 글자가 제대로 전송이 되지 않아 ' 반갑습니' 만 전달이 되어도 상대방은 '반갑습니다' 라고 인식을 할 수 있다. 그러나 우리가 로그인을 하기 위해 전송하는 데이터들은 기계가 처리한다. 기계는 인간처럼 추측을 하는 능력은 없다. 따라서, 기계가 처리하는 데이터들은 신뢰성있게 보내야되요, 이런 경우에는 UDP방식보다는 TCP방식이 적합하다. 우리가 앞으로 배우게 될 스프링으로 하는 모든 통신은 UDP일까 TCP일까? 정답은 TCP이다.","breadcrumbs":"TCP » 청군의 통신 전략 (3 way handshake)","id":"3","title":"청군의 통신 전략 (3 way handshake)"},"4":{"body":"자, 이제 다시한번 청군과 백군의 사례로 돌아가보자. 안타깝게도 TCP만으로는 전쟁에서 이길 수 없다. TCP통신에 무엇을 더하면 전쟁에서 이길 수 있을까? 통신에서 TCP만 지킨다고 완벽하게 통신을 할 수 없다. TCP는 단지 신뢰성 있는 통신일 뿐이다. 여기다가 CIA가 얹어져야 한다. CIA는 보안의 3요소이다. 정보보안의 3요소 CIA 기밀성(Confidentaility) 무결성(Integrity) 가용성(Availability) 청군과 백군의 사례에서 보안의 3요소인 CIA가 어떻게 지켜지지 않았는지 살펴보자. 첫째로, 청군이 보낸 메시지가 백군의 경비병에게 탈취를 당했을때 백군은 그 내용을 볼 수 있다. 이렇게 보호되어야 하는 중요한 메시지가 외부에 노출되는 상황을 기밀성이 깨졌다고 한다. 메시지를 그대로 보냈기 때문에. 누가 이것을 훔치기만하면 바로 알 수 있다. 즉, 메시지가 암호화가 안된 것이다. 두번째로는, 데이터를 전송하는데 탈취를 당하는 경우 오른쪽의 청군은 데이터를 전달 받지 못한다. 사용하고 싶은 데이터를 내가 언제든지 사용할 수 있어야 하는데 사용할 수 없는 것을 가용성이 깨졌다 라고 한다. 뿐만 아니라, \"10시에 공격\" 이라는 데이터의 기밀성을 지키기 위해 암호화를 하기위해 필요한 프로토콜도 통신을 통해서 전달을 해야 한다. 프로토콜이 전달이 되어야 상대방이 메시지를 읽을 수 있다. 프로토콜 전달이 되지 않으면 수신자가 데이터를 받아도 읽을 수가 없다. 프로토콜이 전달되지 않은 상황도 가용성이 깨진것이다. 세번째로, 무결성이 꺠졌다는 것은 이런 개념이다. 내가 전송한 데이터가 탈취뿐만 아니라 위조까지 된 것이다. 즉 전송된 데이터를 신뢰할 수 없다는 것이다. 보안의 3요소인 CIA 세가지를 지키지 못하면 아무리 신뢰성있는 통신을 해도, 의미가 없다. 따라서 CIA를 완벽하게 지킬려면 다른 기법이 필요하다.","breadcrumbs":"TCP » CIA","id":"4","title":"CIA"},"5":{"body":"그 기법에 대해서 배우기 전에, 죄수를 통해 통신을 하는 사례를 좀 살펴보자. 옛날에 데이터를 주고 받기 위해서 죄수들을 이용했다. 죄수들을 영문도 모른체 기절 시키고, 머리카락을 삭발한다음, 죄수의 머리에 전달할 메시지를 적는다. 그리고 깜깜한 감옥에 가두고, 한달쯤 후 머리가 길면, 죄수에게 그냥 저쪽에 가기만 하면, 풀어준다고 하고 보낸다. 이 방법은 암호화라는 측면에서 살펴보면, 아주 유용한 방식이다. 죄수가 적군을 만나도 암호화가 완벽하게 지켜진다. 왜냐하면 메시지를 전달하는 죄수 자신도 어떤 일이 일어나고 있는 것인지를 모르기 때문이다. 이 경우 무결성도 지켜진다. 무결성은 어떻게 지켰을까? 죄수가 그냥 가든지, 혹은 어떠한 메시지가 적힌 종이를 들고 가든지 상관이 없다. 종이를 뺏길 수도 있고, 종이가 위조 당할 수도 있지만, 반대편에서는 종이와 상관없이 죄수의 머리를 밀어서 확인해볼 것이기 때문에, 만약에 머리에 아무것도 안적혀 있다면 신뢰할 수 없는 사람이라는 것을 확인할 수 있다. 이것도 양쪽 간에 프로토콜이 있다는 것이다. 데이터를 전송하기 위해서 죄수를 기절시키고, 머리에다 메시지를 적고, 어두운 감옥에 넣고, 종이에 무언가를 적고, 보내는 일련의 과정 자체가 프로토콜이며, 수신자 측에서는 이 과정을 반대로 하면 된다. 옛날에는 이러한 방식으로 신뢰성있는 통신을 했다. 하지만 이러한 통신에도 단점이 하나 있는데, 뭐가 문제일까? 프로토콜 전달의 문제가 있다.","breadcrumbs":"TCP » 감옥에 갇힌 죄수이야기!!","id":"5","title":"감옥에 갇힌 죄수이야기!!"},"6":{"body":"유명한 다른 사례를 보자. 밥이라는 소년과 엘리스라는 소녀가 있고, 그 중간에는 말썽꾸러기인 트루디라는 소년이 있다. 밥은 엘리스에게 '좋아해'라는 메시지를 보내고 싶은데, 이 메시지를 트루디에게 노출시키지 않기 위해서는 암호화를 해야 한다. 밥과 엘리스 사이에 전달되는 메시지를 뭔가로 암호화를 하려면, 둘 간의 프로토콜이 필요하다. 양쪽이 동일한 프로토콜을 들고 있는걸 대칭키라고 한다. 즉, 키가 하나밖에 없는 것을 말한다. 메시지를 잠글때 프로토콜, 열때 프로토콜이 동일한 것을 대칭키라고 한다. 밥이 A라는 키를 이용해 암호화한 메시지를 전달하고, 엘리스는 암호화된 메시지를 받은 경우, 엘리스는 이 메시지를 열어보기 위해서는 A키가 필요하다. A키가 없이는 엘리스가 열어 볼 수 없는데, 이것은 CIA 중의 Availability 인 가용성이 깨지는 것이다. 그렇다면 가용성을 지키기 위한 조건이 뭘까? A키를 전달해야한다. 프로토콜의 전달의 문제 처럼, A키 전달의 문제가 있다. 엘리스가 A키를 가질 수 있다 것은 트루디도 A키를 가질 수 있다는 것이다. 결국 암호화가 안되는 것이다. 즉, 대칭키는 키 전달의 문제가 있다. 대칭키로 지킬 수 있는것은 CIA중에 기밀성만 지킬 수 있을 뿐, 가용성은 지킬 수 없다. 무결성은 지킬 수 있을까? 무결성도 지킬 수 없다. 밥이 전송한 메시지를 트루디가 탈취하여 '싫어해'라는 메시지로 바꿔서 전달할 수 있다. 엘리스 입장에서는 프로토콜을 모르기 때문에 '싫어해'를 받든, '좋아해'를 받든 누가 보냈는지도 알 수가 없다. 따라서 무결성도 지킬 수 없다.","breadcrumbs":"TCP » 밥의 암호화 전략 (대칭키, 공개키)","id":"6","title":"밥의 암호화 전략 (대칭키, 공개키)"},"7":{"body":"최근에 일어나고 있는 대부분의 통신은 RSA 방식을 쓴다. RSA는 공개키 기반의 아주 좋은 암호화 방식이다. RSA는 키를 두개를 두는 방식이다. RSA를 밥과 엘리스 간의 통신 사례에 적용시켜 보자. 밥과 엘리스가 주고 받는 통신의 가운데에는 트루디가 있다. 현실세계에서 인터넷상에서 일어나는 통신의 모든 데이터는 암호화가 되어 있지 않으면 모두 노출된다고 생각하면 된다. 데이터 암호화를 위해 RSA방식에서는 키를 두개 만든다. 밥이 '밥의 공개키'를 하나 만들고, '밥의 개인키'를 하나더 만든다. 밥은 '밥의 공개키'와 '밥의 개인키' 이렇게 키를 2개 들고 있다. 마찬가지로 엘리스도 '엘리스의 공개키'와 '엘리스의 개인키'를 들고 있다. 여기서 공개키 기반 암호화방식의 특징이 있는데, 다음의 특징을 유념하자. RSA는 공개키로 잠그면 개인키로만 열 수 있다. 반대로 개인키로 잠그면 공개키로 열 수 있다. 알고리즘의 엄밀한 증명은 수학적으로 굉장히 복잡하지만, 단순해 보이는 위 특징은 우리에게 엄청난 일을 해준다는 사실만 명심하자. (미리 스포일을 하자면, RSA 방식은 청군에게 백군과의 전쟁에서 완벽하게 승리하는 방법을 제시해준다.) 이 방식에 대해 좀 더 자세하게 알아보자. 공개키는 모두에게 공개되는 키이다. 트루디도 '밥의 공개키'와 '엘리스의 공개키'를 들고 있다. 밥도 '엘리스의 공개키'를 알고 있고, 마찬가지로 엘리스도 '밥의 공개키'를 들고 있다. 하지만 개인키는 엄청 중요하다. 개인키는 통신으로 절대 전달하지 않고, 개인적인 컴퓨터나 usb에만 둬야한다. 절대 통신으로 개인키를 전달하지 않는다. 다시 말하지만, 통신은 기본적으로 모든것이 노출되어 있다. '밥의 개인키'는 밥만 들고 있다. 밥은 '좋아해'라는 메시지를 지금 보내고 싶고, 이 메시지를 트루디에게 노출시키고 싶지 않다. 그러면 밥은 뭐로 이 메시지를 잠그면 될까? 선택지는 3개가 있다. '밥의 공개키', '밥의 개인키', '엘리스의 공개키' 무엇일까? 암호화를 할 거면 '밥의 공개키'로 잠그거나, '엘리스의 공개키'로 잠궈야 한다. 왜냐하면 트루디에게는 메시지를 열 수 있는, '밥의 개인키'와 '엘리스의 개인키'는 갖고 있지 않기 때문이다. 밥의 입장에서 시나리오를 구상해보자. 밥의 시나리오 1번: '밥의 공개키'로 잠그면 암호화는 된다. 그러나 엘리스는 이걸 열 수 있을까? 트루디와 마찬가지로, 엘리스 또한 이 메시지를 열 수 없다. 엘리스는 '밥의 개인키'를 들고 있지 않기 때문이다. RSA 공개키 기반 방식에서 암호화를 위해서는 내가 데이터를 전송하고자 하는 사람의 공개키로 잠그면 된다. 하지만 '밥의 공개키'로는 암호화는 가능하지만 엘리스가 이용할 수 없기 때문에 가용성이 깨진다. 밥의 시나리오 2번: '엘리스의 공개키'로 잠그면 어떨까. 엘리스만 열어볼 수 있고, 트루디가 절대 열어볼 수 없다. 이것은 키 교환의 문제가 있을까? 문제가 없다. 밥은 자신을 포함한 모두에게 공개된 '엘리스의 공개키'를 사용해 암호화를 하고, 엘리스는 자신만이 갖고 있는 '엘리스의 개인키'를 사용하면 되기 때문이다. 밥의 시나리오 2번처럼, 수신자의 공개키로 잠그는 것으로 암호화는 해결되었다. 자, 그다음에 무결성에 대해서 얘기해보자. 밥이 이번에도 마찬가지로 엘리스에게 '좋아해'를 보낼것이다. 이미 위의 시나리오에서 확인했듯이, 밥은 쉽게 '엘리스의 공개키'로 잠궈서 암호화를 해결했다. 하지만 새로운 문제가 있다. 완벽하게 암호화를 했지만, 트루디는 이 메시지를 탈취를 해서 버려 버리고, '엘리스의 공개키'로 '싫어해'라는 메시지를 자신이 만들어서 엘리스에게 전송한 것이다. 트루디에게 메시지의 내용은 들키지 않았지만, 결과적으로 엘리스에게는 다른 메시지가 전달되었다. 즉, 무결성이 깨졌다. 어떻게 해결할 수 있을까? RSA 방식은 전송 프로토콜이 있다. 이에 대한 개념을 살펴보자. 밥이 엘리스에게 전송하고 싶은 데이터가 있는데, 아이디와 패스워드와 같은 매우 민감한 데이터이다. 내가 보내는 데이터를 보통 통신에서는 payload라고 부른다. 다르게는 body 데이터라고 한다. 첫번째로, 데이터를 암호화 한다. 우선 암호화를 하려면 뭐로 해야 할까? '엘리스의 공개키'로 암호화를 한다. 이 박스를 열어볼 수 있는 사람은 엘리스밖에 없다. 이렇게 박스로 감싸는걸 캡슐화라고 한다. 데이터를 캡슐화하는 것이다. 이걸 한번더 캡슐화하면 된다. '밥의 개인키'로 한번더 캡슐화한다. 이렇게 하면 완벽한 통신을 할 수 있다. 어떻게 가능한 걸까? 지금 데이터는 '밥의 개인키'로 캡슐화 되었다. 그러면 트루디가 탈취를 한다고 해도, 트루디가 할 수 있는건 뭘까? 트루디는 '밥의 공개키'로 겉의 캡슐화를 열어볼 수는 있다. 즉 디캡슐화는 할 수 있다. 이렇게 '엘리스의 공개키'로 잠긴 payload까지는 얻을 수 있다. 이전처럼 트루디가 이걸 버려버리고, 다시 '엘리스의 공개키'로 내용을 '싷어해'라고 바꾸고, 그리고 자기가 한번더 캡슐화를 하는데, 이번엔 '밥의 개인키'로 캡슐화를 할 수 없다. 트루디는 자신의 '트루디의 개인키'로 캡슐화를 할 수 밖에 없다. 이렇게 해서 전달된 메시지를 엘리스는 '트루디의 공개키'로 열어보는 시도조차 하지 않는다. 엘리스는 지금 자신이 밥과 통신을 하고 있는 중이라는 사실을 고 있기 때문에, 신뢰성이 바로 깨져 버린다. 엘리스의 프로토콜은 우선 '밥의 공개키'로 열리는지 부터 체크를 한다. '밥의 공개키'로 열리지 않는 다는 것은 밥이 전송한 메시지가 아니라는 뜻이다. 만약 '밥의 공개키'로 열린다면 신뢰성있는 데이터라는 것을 알 수 있고, 무결성이 깨지지 않는다. 무결성을 확보하지 못한 데이터는 fail로 처리를 할 것이고, '밥의 공개키'로 열린 무결성을 확보한 데이터는 그 다음 단계로 '엘리스의 개인키'로 열리는지 확인을 할 것이다. 이것이 열린다는 것은 엘리스 만이 열 수 있는 데이터라는 뜻이 된다. 이렇게 기밀성이 보장되었다는 것을 100퍼센트 확신할 수 있다. 정리해보자. 암호화를 하고 싶으면 '수신자의 공개키'로 잠그면 된다. 데이터의 무결성을 지키고 싶으면 '송신자의 개인키'로 잠그면 된다. '수신자의 공개키'로 잠그면 수신자만 열어볼 수 있다. 즉, 암호화가 되는 것이다. '송신자의 개인키'로 잠그는 것은 누구나 열어볼 수 있고, 이것은 암호화랑은 아무 상관이 없다. 이것은 데이터의 신뢰성, 즉 무결성과 관련되는 것이다. 일상 생활에서 우리가 하는 전자서명, 다른 말로는 부인방지라고 하는 것과 관계가 있다. 이와 관련된 사례를 살펴보자. 홍길동과 임꺽정이라는 사람과 은행이 있다. 홍길동은 '홍길동의 개인키'와 '홍길동의 공개키', 임꺽정은 '임꺽정의 개인키'와 '임꺽정의 공개키'를 들고 있고, 은행도 '홍길동의 공개키'와 '임꺽정의 공개키'를 들고 있다. 홍길동이 은행에게 byte stream을 통해서 \"홍길동은 임꺽정에게 1억을 송금한다.\" 라는 메시지를 전달하려고 한다. 이 메시지는 누가 적어야지 신뢰할 수 있는 데이터일까? 무조건 홍길동이 적어야 한다. 홍길동이 적지 않은 메시지라면 은행에서 인정을 해줄 수 없다. 홍길동이 잠궜다는걸 확인할 수 있는, 즉 '홍길동의 개인키'로 잠긴 데이터라는 사실을 확인할 유일한 방법은 은행이 '홍길동의 공개키'로 열어보는 것이다. 홍길동의 공개키로 열리는 순간, 홍길동이 메시지를 적은 것이라는 것이 확인된다. 반대로 이런 경우도 있을 수 있다. 홍길동이 은행에게 \"임꺽정은 홍길동한테 10억을 송금한다.\" 이렇게 메시지를 보낸다고 생각해보자. 이 메시지 자체는 암호화가 중요한게 아니다. 이 통신이 CIA중에 기밀성인 C를 지킬 필요가 없다. 은행의 입장에서는 홍길동이 보낸 메시지임을 확인하고 '홍길동의 공개키'로 열어볼 것 이다. 그러나 이 메시지의 내용은 임꺽정이 쓴 것이어야만 하는 내용이다. 따라서 은행은 이를 부인한다. 우리가 들고있는 개인 공인인증서는 우리의 개인키이다. 출금말고 입금을 한번 해본다고 해보자. 신뢰성 중요할까? 이 경우 신뢰성은 필요가 없다.","breadcrumbs":"TCP » 밥의 신뢰성 전략 (RSA)","id":"7","title":"밥의 신뢰성 전략 (RSA)"},"8":{"body":"다시 처음으로 돌아가, 청군과 백군의 전쟁에서 청군이 승리할 수 있는 확실한 방법에 대해 이야기해 보자. 한마디로 요약하면, TCP를 지키고 RSA로 통신하는 것이다. 이를 통해 청군은 무조건 전쟁에서 이길 수 있다. 최근에 어떤 글자에 s가 붙은 용어들이 많이 있다. https 라거나 ssh와 같이 s가 붙어있는데, 이는 secure 의 약자이다. 이러한 용어들은 다 RSA 방식이 적용된다. 아주 상식적인 얘기를 해보자. 버스회사가 있고 이 버스회사는 자체적으로 토큰을 발행한다. 시민은 버스 토큰을 넣으면 버스를 탈 수 있다. 버스회사가 토큰을 발행하는데, 이 토큰은 자신만이 유일하게 만들어야지 아무나 만들 수 있으면 안된다. 그렇게 하기 위해서는 이 토큰을 '버스회사의 개인키'로 잠궈야 한다. 이렇게 이 토큰의 신뢰성을 확보할 수 있다. 시민들이 토큰을 받았고, 이 토큰을 다시 버스에게 건내고 버스를 탄다. 이 사례는 토큰의 발행주체와 토큰의 검증주체가 같은 경우이다. 시민은 토큰을 검증할 필요가 없다. 버스회사는 자신이 발행한 토큰이 맞는지만 확인하고, 버스를 타게 해줄 것이다. 이렇게 토큰을 발행한 주체와 검증주체가 같은 경우 검증을 다른 곳에서 할 필요가 없고, RSA를 쓸 필요가 없다. 공개키 기반 방식이 아니라, 대칭키를 사용하면 된다. 이것을 꼭 기억하자. 발행주체와 검증주체가 같으면 키 교환이 필요 없고, 키 교환이 필요없으면 대칭키를 쓰면 된다. 대표적인 대칭키 암호화 방식에는 HS512를 많이 쓴다. 이것은 외워도 좋다. 이름은 크게 중요하지 않다. HS512가 무슨 알고리즘으로 만들어졌는지도 중요하지 않다. 우리가 기억할 것은, HS512가 대칭키이고 이 대칭키를 언제 사용해야 하는지에 대한 개념이 중요하다. 조금 다른 사례를 들어보자. 이번에는 국가가 토큰을 발행하고 이 토큰을 시민이 버스를 탈때 사용한다고 생각해보자. 국가가 토큰을 발행할때 누구의 어떤 키로 잠궈야 할까? '국가의 개인키'로 잠궈야 한다. 이것을 시민들한테 주고, 시민 한명이 이 토큰을 받았다. 시민은 토큰을 검증할 필요가 없다. 이걸 들고 있다가 사용만 하면 된다. 시민은 그냥 버스탈때 전달만 하면 되는 것이다. 버스회사는 여기서 뭘 해야 할까? 버스는 토큰을 검증해야 한다. 버스회사가 검증 주체가 되는데, 이때 뭐로 검증을 해야 할까? '국가의 공개키'로 토큰을 검증을 하면 된다. '국가의 공개키'로 열린다면 국가가 만든 것이라는 것으로 검증을 끝낼 수 있다. 검증주체랑 발행 주체가 다를때 대칭키 쓸 수 있을까? 쓸 수 없다. 대칭키는 전달의 문제가 있다. 따라서 이때에는 공개키를 써야한다. 이때 쓰는게 RSA 방식이다. 네이버 로그인과 같은 소셜 로그인을 많이 써봤을 것이다. 우리는 이제 겟인데어라는 회사의 홈페이지를 하나 운영할 것이다. 이를 사용하려는 개인이 있고 우리 홈페이지를 이용하기 위해서는 인증이 필요하다. 실제 인증을 위해서는 로직이 굉장히 복잡하고, 법을 지키고, 이를 관리하는 등 매우 힘들고 어려운 절차들이 있다. 그래서 이 인증을 네이버와 같은 소셜 로그인을 제공해주는 회사에게 넘긴다. 이때 개인은 네이버에서 로그인을 한다. 개인이 아이디랑 패스워드를 잘 전달하면 네이버가 토큰을 주는데, 이때 뭐로 잠궈서 토큰을 줄까? 만약에 네이버가 대칭키로 잠궈주면 검증을 네이버밖에 할 수 없다. 물론 소셜 로그인사가 다 RSA를 쓰지는 않는다. 어떤 소셜 로그인은 대칭키를 쓰기도 하며, 발행과 검증을 자신이 다 하기도 한다. 소셜 로그인도 이러한 내용에 대한 개념이 잡혀있어야 OAuth를 쓸 수 있다. 만약 네이버가 대칭키로 하지 않고 RSA로 토큰을 발행했다면, 개인은 겟인데어에게 이 토큰을 전송하고 겟인데어 입장에서는 뭐만 들고 있으면 이걸 신뢰할 수 있을까? 이것이 이번 단원의 마지막 질문이다. 잘 고민해보고 꼭 맞춰보자. '네이버의 공개키'만 들고 있으면 된다. 네이버의 공개키를 가지고 열어보고, 열리면 네이버가 발행한 토큰이라는 것이 확인되는 것이다. 네이버는 사용자가 아이디와 패스워드를 잘 전송하면 토큰을 만들어 줄 것이고, 그러면 겟인데어는 '네이버의 공개키'로 열어서 열린다면 신뢰할 수 있다. 이걸 소셜 로그인이라고 한다. 개념들이 잘 잡혀있으면 간단한 내용이다. 기초가 탄탄하게 잡혀있으면 나중에 대칭키를 써야하는지 RSA를 써야하는지 파악할 수 있고, 프로세스를 짤 수 있다. 이걸 OAuth(Open Authentication)라고 한다. 인증을 열어 준다는 뜻이다. 다시 강조하지만, 기본기가 매우 중요하다. 나중에 이런 공부를 하게 될때 위의 개념들이 생각이 나기를 바란다. 그리고 스프링할 때 이런걸 정확하게 이해하고 재밌게 즐기길 바란다.","breadcrumbs":"TCP » 청군이 백군에게 완벽하게 승리하는 방법","id":"8","title":"청군이 백군에게 완벽하게 승리하는 방법"}},"length":9,"save":true},"fields":["title","body","breadcrumbs"],"index":{"body":{"root":{"1":{"0":{"0":{"df":2,"docs":{"3":{"tf":1.0},"7":{"tf":1.0}}},"df":3,"docs":{"3":{"tf":1.4142135623730951},"4":{"tf":1.0},"7":{"tf":1.0}}},"df":1,"docs":{"7":{"tf":1.4142135623730951}}},"2":{"0":{"2":{"3":{"df":1,"docs":{"3":{"tf":1.4142135623730951}}},"df":0,"docs":{}},"df":0,"docs":{}},"4":{"df":1,"docs":{"3":{"tf":1.0}}},"df":2,"docs":{"3":{"tf":1.7320508075688772},"7":{"tf":1.7320508075688772}}},"3":{"df":3,"docs":{"3":{"tf":2.0},"4":{"tf":2.0},"7":{"tf":1.0}}},"4":{"df":1,"docs":{"3":{"tf":1.0}}},"5":{"0":{"df":1,"docs":{"3":{"tf":1.4142135623730951}}},"df":1,"docs":{"3":{"tf":1.0}}},"8":{"0":{"df":1,"docs":{"3":{"tf":1.4142135623730951}}},"df":0,"docs":{}},"a":{"df":0,"docs":{},"u":{"df":0,"docs":{},"t":{"df":0,"docs":{},"h":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"df":1,"docs":{"8":{"tf":1.0}}}}}}}},"v":{"a":{"df":0,"docs":{},"i":{"df":0,"docs":{},"l":{"df":2,"docs":{"4":{"tf":1.0},"6":{"tf":1.0}}}}},"df":0,"docs":{}}},"b":{"df":0,"docs":{},"o":{"d":{"df":0,"docs":{},"i":{"df":1,"docs":{"7":{"tf":1.0}}}},"df":0,"docs":{}},"y":{"df":0,"docs":{},"t":{"df":0,"docs":{},"e":{"df":1,"docs":{"7":{"tf":1.0}}}}}},"c":{"df":1,"docs":{"7":{"tf":1.0}},"i":{"a":{"df":3,"docs":{"4":{"tf":2.6457513110645907},"6":{"tf":1.4142135623730951},"7":{"tf":1.0}}},"df":0,"docs":{}},"o":{"df":0,"docs":{},"n":{"df":0,"docs":{},"f":{"df":0,"docs":{},"i":{"d":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"a":{"df":0,"docs":{},"i":{"df":0,"docs":{},"l":{"df":1,"docs":{"4":{"tf":1.0}}}}},"df":0,"docs":{}}}}},"df":0,"docs":{}}}}}},"df":0,"docs":{},"f":{"a":{"df":0,"docs":{},"i":{"df":0,"docs":{},"l":{"df":1,"docs":{"7":{"tf":1.0}}}}},"df":0,"docs":{}},"h":{"a":{"df":0,"docs":{},"n":{"d":{"df":0,"docs":{},"s":{"df":0,"docs":{},"h":{"a":{"df":0,"docs":{},"k":{"df":1,"docs":{"3":{"tf":2.0}}}},"df":0,"docs":{}}}},"df":0,"docs":{}}},"df":0,"docs":{},"s":{"5":{"1":{"2":{"df":1,"docs":{"8":{"tf":1.7320508075688772}}},"df":0,"docs":{}},"df":0,"docs":{}},"df":0,"docs":{}},"t":{"df":0,"docs":{},"t":{"df":0,"docs":{},"p":{"df":1,"docs":{"8":{"tf":1.0}}}}}},"i":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"df":0,"docs":{},"e":{"df":0,"docs":{},"g":{"df":0,"docs":{},"r":{"df":1,"docs":{"4":{"tf":1.0}}}}},"r":{"df":0,"docs":{},"o":{"d":{"df":0,"docs":{},"u":{"c":{"df":0,"docs":{},"t":{"df":1,"docs":{"0":{"tf":1.0}}}},"df":0,"docs":{}}},"df":0,"docs":{}}}}}},"o":{"a":{"df":0,"docs":{},"u":{"df":0,"docs":{},"t":{"df":0,"docs":{},"h":{"(":{"df":0,"docs":{},"o":{"df":0,"docs":{},"p":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":1,"docs":{"8":{"tf":1.0}}}}}}},"df":1,"docs":{"8":{"tf":1.0}}}}}},"df":0,"docs":{},"k":{"df":1,"docs":{"3":{"tf":1.4142135623730951}}}},"p":{"a":{"df":0,"docs":{},"y":{"df":0,"docs":{},"l":{"df":0,"docs":{},"o":{"a":{"d":{"df":1,"docs":{"7":{"tf":1.4142135623730951}}},"df":0,"docs":{}},"df":0,"docs":{}}}}},"df":0,"docs":{}},"r":{"df":0,"docs":{},"s":{"a":{"df":3,"docs":{"3":{"tf":1.0},"7":{"tf":3.1622776601683795},"8":{"tf":2.6457513110645907}}},"df":0,"docs":{}}},"s":{"df":1,"docs":{"8":{"tf":1.4142135623730951}},"e":{"c":{"df":0,"docs":{},"u":{"df":0,"docs":{},"r":{"df":1,"docs":{"8":{"tf":1.0}}}}},"df":0,"docs":{}},"s":{"df":0,"docs":{},"h":{"df":1,"docs":{"8":{"tf":1.0}}}},"t":{"df":0,"docs":{},"r":{"df":0,"docs":{},"e":{"a":{"df":0,"docs":{},"m":{"df":1,"docs":{"7":{"tf":1.0}}}},"df":0,"docs":{}}}}},"t":{"c":{"df":0,"docs":{},"p":{"/":{"df":0,"docs":{},"u":{"d":{"df":0,"docs":{},"p":{"df":1,"docs":{"2":{"tf":1.4142135623730951}}}},"df":0,"docs":{}}},"df":3,"docs":{"3":{"tf":2.23606797749979},"4":{"tf":2.0},"8":{"tf":1.0}}}},"df":0,"docs":{}},"u":{"d":{"df":0,"docs":{},"p":{"df":1,"docs":{"3":{"tf":2.449489742783178}}}},"df":0,"docs":{},"s":{"b":{"df":1,"docs":{"7":{"tf":1.0}}},"df":0,"docs":{}}},"w":{"a":{"df":0,"docs":{},"y":{"df":1,"docs":{"3":{"tf":2.0}}}},"df":0,"docs":{}}}},"breadcrumbs":{"root":{"1":{"0":{"0":{"df":2,"docs":{"3":{"tf":1.0},"7":{"tf":1.0}}},"df":3,"docs":{"3":{"tf":1.4142135623730951},"4":{"tf":1.0},"7":{"tf":1.0}}},"df":1,"docs":{"7":{"tf":1.4142135623730951}}},"2":{"0":{"2":{"3":{"df":1,"docs":{"3":{"tf":1.4142135623730951}}},"df":0,"docs":{}},"df":0,"docs":{}},"4":{"df":1,"docs":{"3":{"tf":1.0}}},"df":2,"docs":{"3":{"tf":1.7320508075688772},"7":{"tf":1.7320508075688772}}},"3":{"df":3,"docs":{"3":{"tf":2.23606797749979},"4":{"tf":2.0},"7":{"tf":1.0}}},"4":{"df":1,"docs":{"3":{"tf":1.0}}},"5":{"0":{"df":1,"docs":{"3":{"tf":1.4142135623730951}}},"df":1,"docs":{"3":{"tf":1.0}}},"8":{"0":{"df":1,"docs":{"3":{"tf":1.4142135623730951}}},"df":0,"docs":{}},"a":{"df":0,"docs":{},"u":{"df":0,"docs":{},"t":{"df":0,"docs":{},"h":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"df":1,"docs":{"8":{"tf":1.0}}}}}}}},"v":{"a":{"df":0,"docs":{},"i":{"df":0,"docs":{},"l":{"df":2,"docs":{"4":{"tf":1.0},"6":{"tf":1.0}}}}},"df":0,"docs":{}}},"b":{"df":0,"docs":{},"o":{"d":{"df":0,"docs":{},"i":{"df":1,"docs":{"7":{"tf":1.0}}}},"df":0,"docs":{}},"y":{"df":0,"docs":{},"t":{"df":0,"docs":{},"e":{"df":1,"docs":{"7":{"tf":1.0}}}}}},"c":{"df":1,"docs":{"7":{"tf":1.0}},"i":{"a":{"df":3,"docs":{"4":{"tf":2.8284271247461903},"6":{"tf":1.4142135623730951},"7":{"tf":1.0}}},"df":0,"docs":{}},"o":{"df":0,"docs":{},"n":{"df":0,"docs":{},"f":{"df":0,"docs":{},"i":{"d":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"a":{"df":0,"docs":{},"i":{"df":0,"docs":{},"l":{"df":1,"docs":{"4":{"tf":1.0}}}}},"df":0,"docs":{}}}}},"df":0,"docs":{}}}}}},"df":0,"docs":{},"f":{"a":{"df":0,"docs":{},"i":{"df":0,"docs":{},"l":{"df":1,"docs":{"7":{"tf":1.0}}}}},"df":0,"docs":{}},"h":{"a":{"df":0,"docs":{},"n":{"d":{"df":0,"docs":{},"s":{"df":0,"docs":{},"h":{"a":{"df":0,"docs":{},"k":{"df":1,"docs":{"3":{"tf":2.23606797749979}}}},"df":0,"docs":{}}}},"df":0,"docs":{}}},"df":0,"docs":{},"s":{"5":{"1":{"2":{"df":1,"docs":{"8":{"tf":1.7320508075688772}}},"df":0,"docs":{}},"df":0,"docs":{}},"df":0,"docs":{}},"t":{"df":0,"docs":{},"t":{"df":0,"docs":{},"p":{"df":1,"docs":{"8":{"tf":1.0}}}}}},"i":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"df":0,"docs":{},"e":{"df":0,"docs":{},"g":{"df":0,"docs":{},"r":{"df":1,"docs":{"4":{"tf":1.0}}}}},"r":{"df":0,"docs":{},"o":{"d":{"df":0,"docs":{},"u":{"c":{"df":0,"docs":{},"t":{"df":1,"docs":{"0":{"tf":1.7320508075688772}}}},"df":0,"docs":{}}},"df":0,"docs":{}}}}}},"o":{"a":{"df":0,"docs":{},"u":{"df":0,"docs":{},"t":{"df":0,"docs":{},"h":{"(":{"df":0,"docs":{},"o":{"df":0,"docs":{},"p":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":1,"docs":{"8":{"tf":1.0}}}}}}},"df":1,"docs":{"8":{"tf":1.0}}}}}},"df":0,"docs":{},"k":{"df":1,"docs":{"3":{"tf":1.4142135623730951}}}},"p":{"a":{"df":0,"docs":{},"y":{"df":0,"docs":{},"l":{"df":0,"docs":{},"o":{"a":{"d":{"df":1,"docs":{"7":{"tf":1.4142135623730951}}},"df":0,"docs":{}},"df":0,"docs":{}}}}},"df":0,"docs":{}},"r":{"df":0,"docs":{},"s":{"a":{"df":3,"docs":{"3":{"tf":1.0},"7":{"tf":3.3166247903554},"8":{"tf":2.6457513110645907}}},"df":0,"docs":{}}},"s":{"df":1,"docs":{"8":{"tf":1.4142135623730951}},"e":{"c":{"df":0,"docs":{},"u":{"df":0,"docs":{},"r":{"df":1,"docs":{"8":{"tf":1.0}}}}},"df":0,"docs":{}},"s":{"df":0,"docs":{},"h":{"df":1,"docs":{"8":{"tf":1.0}}}},"t":{"df":0,"docs":{},"r":{"df":0,"docs":{},"e":{"a":{"df":0,"docs":{},"m":{"df":1,"docs":{"7":{"tf":1.0}}}},"df":0,"docs":{}}}}},"t":{"c":{"df":0,"docs":{},"p":{"/":{"df":0,"docs":{},"u":{"d":{"df":0,"docs":{},"p":{"df":1,"docs":{"2":{"tf":1.7320508075688772}}}},"df":0,"docs":{}}},"df":7,"docs":{"2":{"tf":1.0},"3":{"tf":2.449489742783178},"4":{"tf":2.23606797749979},"5":{"tf":1.0},"6":{"tf":1.0},"7":{"tf":1.0},"8":{"tf":1.4142135623730951}}}},"df":0,"docs":{}},"u":{"d":{"df":0,"docs":{},"p":{"df":1,"docs":{"3":{"tf":2.449489742783178}}}},"df":0,"docs":{},"s":{"b":{"df":1,"docs":{"7":{"tf":1.0}}},"df":0,"docs":{}}},"w":{"a":{"df":0,"docs":{},"y":{"df":1,"docs":{"3":{"tf":2.23606797749979}}}},"df":0,"docs":{}}}},"title":{"root":{"3":{"df":1,"docs":{"3":{"tf":1.0}}},"c":{"df":0,"docs":{},"i":{"a":{"df":1,"docs":{"4":{"tf":1.0}}},"df":0,"docs":{}}},"df":0,"docs":{},"h":{"a":{"df":0,"docs":{},"n":{"d":{"df":0,"docs":{},"s":{"df":0,"docs":{},"h":{"a":{"df":0,"docs":{},"k":{"df":1,"docs":{"3":{"tf":1.0}}}},"df":0,"docs":{}}}},"df":0,"docs":{}}},"df":0,"docs":{}},"i":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"df":0,"docs":{},"r":{"df":0,"docs":{},"o":{"d":{"df":0,"docs":{},"u":{"c":{"df":0,"docs":{},"t":{"df":1,"docs":{"0":{"tf":1.0}}}},"df":0,"docs":{}}},"df":0,"docs":{}}}}}},"r":{"df":0,"docs":{},"s":{"a":{"df":1,"docs":{"7":{"tf":1.0}}},"df":0,"docs":{}}},"t":{"c":{"df":0,"docs":{},"p":{"/":{"df":0,"docs":{},"u":{"d":{"df":0,"docs":{},"p":{"df":1,"docs":{"2":{"tf":1.0}}}},"df":0,"docs":{}}},"df":0,"docs":{}}},"df":0,"docs":{}},"w":{"a":{"df":0,"docs":{},"y":{"df":1,"docs":{"3":{"tf":1.0}}}},"df":0,"docs":{}}}}},"lang":"English","pipeline":["trimmer","stopWordFilter","stemmer"],"ref":"id","version":"0.9.5"},"results_options":{"limit_results":30,"teaser_word_count":30},"search_options":{"bool":"OR","expand":true,"fields":{"body":{"boost":1},"breadcrumbs":{"boost":1},"title":{"boost":2}}}});